{% extends "base.html" %}

{% import "macros.html" as macros %}

{% block htmltitle %}
{{ macros::title_or_last(component=section) }} - {{ config.title }}
{% endblock htmltitle %}

{% block title %}
{{ macros::title_or_last(component=section) }}
{% endblock title %}

{% block sections %}
{{ macros::section_menu(path=section.relative_path) }}
{% endblock sections %}

{% block content %}
<div class="hero">
    <h1>{{ macros::title_or_last(component=section) }}</h1>
</div>

<div class="post-grid">
    {% for page in section.pages %}
    <a href="{{ page.permalink }}" class="card">
        <h3>{{ macros::title_or_last(component=page, offset=0) }}</h3>

        {% if page.description %}
        <p>{{ page.description }}</p>
        {% elif page.summary %}
        <p>{{ page.summary | striptags | truncate(length=150) }}</p>
        {% endif %}

        <div class="meta">
            {% if page.date %}
            <span>{{ macros::format_date(date=page.date) }}</span>
            {% endif %}
            <span>Read</span>
        </div>
    </a>
    {% endfor %}
</div>
{% endblock content %}