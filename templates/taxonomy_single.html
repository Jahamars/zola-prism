{% extends "base.html" %}
{% import "macros.html" as macros %}

{% block htmltitle %}
{{ term.name }} - {{ taxonomy.name | title }} - {{ config.title }}
{% endblock htmltitle %}

{% block title %}
{{ term.name }}
{% endblock title %}

{% block content %}
<div id="content">
    <div class="hero">
        <h1>{{ term.name }}</h1>
        <p style="color: var(--text-secondary); margin-top: 1rem;">
            {{ term.pages | length }} {% if term.pages | length == 1 %}post{% else %}posts{% endif %} 
            in {{ taxonomy.name | title }}
        </p>
    </div>

    {% if term.pages %}
    <div class="post-grid">
        {% for page in term.pages %}
        <a href="{{ page.permalink }}" class="card">
            <h3>{{ page.title }}</h3>

            {% if page.description %}
            <p>{{ page.description }}</p>
            {% elif page.summary %}
            <p>{{ page.summary | striptags | truncate(length=150) }}</p>
            {% else %}
            <p>{{ page.content | striptags | truncate(length=150) }}</p>
            {% endif %}

            <div class="meta">
                {% if page.date %}
                <span>{{ page.date | date(format="%b %d, %Y") }}</span>
                {% endif %}
                
                {% if page.reading_time and config.extra.show_reading_time %}
                <span>{{ page.reading_time }} min read</span>
                {% endif %}
            </div>
        </a>
        {% endfor %}
    </div>
    {% endif %}
</div>
{% endblock content %}
