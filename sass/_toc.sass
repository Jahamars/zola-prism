// ============================================
// Table of Contents
// ============================================

@import "vars"
@import "mixins"

.table-of-contents
    padding: 0
    margin: var(--space-lg) 0
    position: sticky
    top: var(--space-lg)
    max-height: calc(100vh - 4rem)
    overflow-y: auto
    opacity: 0
    transform: translateY(10px)
    +transition(opacity, transform)

    // Custom scrollbar
    scrollbar-width: thin
    scrollbar-color: var(--glass-border) transparent

    &::-webkit-scrollbar
        width: 4px

    &::-webkit-scrollbar-track
        background: transparent

    &::-webkit-scrollbar-thumb
        background: var(--glass-border)
        border-radius: 4px
        
        &:hover
            background: var(--text-secondary)

    &.visible
        opacity: 1
        transform: translateY(0)

.toc-header
    margin-bottom: 0.75rem
    padding-left: var(--space-sm)
    
.toc-title
    font-family: var(--font-heading)
    font-size: 0.75rem
    font-weight: 600
    text-transform: uppercase
    letter-spacing: 1.2px
    color: var(--text-secondary)
    opacity: 0.8

.toc-list
    list-style: none
    padding: 0
    margin: 0
    position: relative
    
    &::before
        content: ''
        position: absolute
        top: 0
        bottom: 0
        left: 0
        width: 1px
        background: var(--glass-border)
        opacity: 0.5

.toc-item
    margin: 0
    
    &.toc-item--nested
        margin-left: 0

.toc-link
    display: block
    padding: 0.35rem var(--space-sm)
    color: var(--text-secondary)
    font-size: clamp(0.78rem, 0.5rem + 0.4vw, 0.9rem)
    text-decoration: none
    border-left: 2px solid transparent
    +transition(color, border-left-color)
    margin-left: -1px
    +focus-visible

    &:hover
        color: var(--text-primary)
        border-left-color: var(--text-secondary)

    &.toc-link--active
        color: var(--text-primary)
        border-left-color: var(--text-primary)
        font-weight: 500

    &.toc-link--nested
        font-size: clamp(0.76rem, 0.52rem + 0.3vw, 0.85rem)
        padding-top: 0.25rem
        padding-bottom: 0.25rem
        padding-left: var(--space-md)
        
        &.toc-link--active
            color: var(--text-primary)
            border-left-color: var(--text-primary)

+mobile
    .table-of-contents
        position: static
        top: auto
        max-height: none
        margin: var(--space-md) 0
        padding-left: 0
        border-left: none
        
        .toc-list::before
            display: none

    .toc-link
        border-left: 2px solid var(--glass-border)
        margin-left: 0
